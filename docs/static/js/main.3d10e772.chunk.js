(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,,function(e,a,t){e.exports=t.p+"static/media/logo-bmind-holidays.d4acb251.png"},function(e,a,t){e.exports=t.p+"static/media/logo-bmind.b33ac75d.png"},,function(e,a,t){e.exports=t(41)},,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,function(e,a,t){},,,,,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(13),l=t.n(s),c=(t(23),t(3)),i=t(4),o=t(6),d=t(5),u=t(2),h=t(7),g=(t(24),t(25),t(14)),m=t.n(g);var f=function(e){var a=e.loggedUser;return r.a.createElement("header",{className:"Header"},r.a.createElement("img",{src:m.a,alt:"logo Bmind",className:"Header__image"}),r.a.createElement("p",{className:"Header__wellcome"},"Hola, ".concat(a.name)))},y=(t(26),t(27),t(1)),v=t.n(y);var p=function(e){var a=e.selectedUser,t=parseInt(a.vacation_days[v()().year()])-parseInt(a.vacations_used[v()().year()]);return r.a.createElement("div",{className:"info-holidays"},"Informaci\xf3n sobre las vacaciones de este a\xf1o de ",r.a.createElement("span",{className:"bold-name"},a.name)," :",r.a.createElement("ul",{className:"info-holidays__days"},r.a.createElement("li",null,"Vacaciones totales: ",a.vacation_days[v()().year()]||"sin informaci\xf3n"),r.a.createElement("li",null,"Vacaciones usadas: ",a.vacations_used[v()().year()]||"sin informaci\xf3n"),r.a.createElement("li",null,"Vacaciones disponibles: ",t||"sin informaci\xf3n")))},k=(t(29),t(10)),b=(t(38),function(e){return r.a.createElement("div",{className:"info__container"},r.a.createElement("div",{className:"Main__legend-content"},r.a.createElement("div",{className:"Main__legend-color-approved"}),r.a.createElement("p",null,"Vacaciones aprobadas"),r.a.createElement("div",{className:"Main__legend-color-requested"}),r.a.createElement("p",null,"Vacaciones seleccionadas")),r.a.createElement("div",{className:"info__container__info-button"},r.a.createElement("p",{className:"info__paragraph"},e.isDisabled?"Si quieres elegir tus vacaciones, vuelve a tu usuario":""),r.a.createElement("button",{className:"btn-validate",disabled:e.isDisabled,onClick:e.handleValidatePeriod},"Validar")))}),R=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(o.a)(this,Object(d.a)(a).call(this,e))).state={showDaysOfWeek:!0,showTodayBtn:!0,showWeekSeparators:!0,firstDayOfWeek:1,customCSSclasses:{}},t}return Object(h.a)(a,e),Object(i.a)(a,[{key:"selectFirstDayOfWeek",value:function(e){this.setState({firstDayOfWeek:parseInt(e.target.value,10)})}},{key:"render",value:function(){var e=this.state,a=e.showTodayBtn,t=e.showDaysOfWeek,n=e.forceFullWeeks,s=e.showWeekSeparators,l=e.firstDayOfWeek,c=e.customCSSclasses,i=this.props,o=i.selectedUser,d=i.isDisabled,u=i.selectRange,h=i.selectedRange,g=i.year,m=i.selectedDay,f=i.goToToday,y=i.onNextYear,v=i.datePicked,p=i.onPrevYear,R=i.rangePicked,E=i.handleValidatePeriod;c={};var D=!0,P=!1,C=void 0;try{for(var O,N=o.periods[Symbol.iterator]();!(D=(O=N.next()).done);D=!0){var T=O.value;c["periods "+T.id]={start:T.start_date,end:T.end_date}}}catch(S){P=!0,C=S}finally{try{D||null==N.return||N.return()}finally{if(P)throw C}}return r.a.createElement("div",null,r.a.createElement("div",{id:"calendar"},r.a.createElement(k.CalendarControls,{year:g,showTodayButton:a,onPrevYear:function(){return p()},onNextYear:function(){return y()},goToToday:function(){return f()}}),r.a.createElement(k.Calendar,{selectedUser:o,year:g,selectedDay:m,showDaysOfWeek:t,forceFullWeeks:n,showWeekSeparators:s,firstDayOfWeek:l,selectRange:u,selectedRange:h,onPickDate:function(e){return v(e)},onPickRange:function(e,a){return R(e,a)},customClasses:c})),r.a.createElement(b,{isDisabled:d,handleValidatePeriod:E}))}}]),a}(r.a.Component);var E=function(e){var a=e.selectedUser,t=e.isDisabled,n=e.loggedUser,s=e.selectRange,l=e.selectedRange,c=e.year,i=e.selectedDay,o=e.goToToday,d=e.onNextYear,u=e.datePicked,h=e.onPrevYear,g=e.rangePicked,m=e.selectRangeAvailable,f=e.handleValidatePeriod;return r.a.createElement("div",null,r.a.createElement(R,{selectedUser:a,isDisabled:t,loggedUser:n,selectRange:s,selectedRange:l,year:c,selectedDay:i,goToToday:o,onNextYear:d,datePicked:u,onPrevYear:h,rangePicked:g,selectRangeAvailable:m,handleValidatePeriod:f}))};t(39);var D=function(e){var a=e.usersData,t=e.handlerChangeSelect,n=e.handlerChangeTeam,s=e.team;return r.a.createElement("div",{className:"container-filters"},r.a.createElement("label",{htmlFor:""}," Equipo: "),r.a.createElement("select",{className:"btn-select",onChange:n},r.a.createElement("option",{value:"0",key:"0"}," Todos"),r.a.createElement("option",{value:"1",key:"1"}," Marketing"),r.a.createElement("option",{value:"2",key:"2"}," Dpto.T\xe9cnico")),r.a.createElement("label",{htmlFor:""}," Usuarios:  "),r.a.createElement("select",{className:"btn-select",onChange:t},"0"===s?a.map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)}):a.filter(function(e){return e.team_id===s}).map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)})))};var P=function(e){var a=e.selectedUser,t=e.usersData,n=e.handlerChangeSelect,s=e.isDisabled,l=e.loggedUser,c=e.selectRange,i=e.selectedRange,o=e.year,d=e.selectedDay,u=e.goToToday,h=e.onNextYear,g=e.datePicked,m=e.onPrevYear,f=e.rangePicked,y=e.selectRangeAvailable,v=e.handlerChangeTeam,k=e.handleValidatePeriod,b=e.team;return r.a.createElement("main",{className:"Main"},r.a.createElement("section",{className:"content-info-filter"},r.a.createElement(p,{selectedUser:a}),r.a.createElement(D,{usersData:t,handlerChangeSelect:n,selectedUser:a,handlerChangeTeam:v,team:b})),r.a.createElement(E,{selectedUser:a,isDisabled:s,loggedUser:l,selectRange:c,selectedRange:i,year:o,selectedDay:d,goToToday:u,onNextYear:h,datePicked:g,onPrevYear:m,rangePicked:f,selectRangeAvailable:y,handleValidatePeriod:k}))},C=(t(40),t(15)),O=t.n(C);var N=function(){return r.a.createElement("footer",{className:"Footer"},r.a.createElement("p",{className:"Footer__copyright"},"Created by Adalabers \xa9 2019"),r.a.createElement("a",{href:"https://www.bmind.es/es/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:O.a,alt:"logo Bmind",className:"Footer__image"})))};var T=function(e){var a=e.selectedUser,t=e.usersData,s=e.handlerChangeSelect,l=e.loggedUser,c=e.isDisabled,i=e.selectRange,o=e.selectedRange,d=e.year,u=e.selectedDay,h=e.goToToday,g=e.onNextYear,m=e.datePicked,y=e.onPrevYear,v=e.rangePicked,p=e.selectRangeAvailable,k=e.handlerChangeTeam,b=e.handleValidatePeriod,R=e.team;return r.a.createElement(n.Fragment,null,r.a.createElement(f,{loggedUser:l}),r.a.createElement(P,{selectedUser:a,usersData:t,handlerChangeSelect:s,handlerChangeTeam:k,team:R,isDisabled:c,loggedUser:l,selectRange:i,selectedRange:o,year:d,selectedDay:u,goToToday:h,onNextYear:g,datePicked:m,onPrevYear:y,rangePicked:v,selectRangeAvailable:p,handleValidatePeriod:b}),r.a.createElement(N,null))};var S=function(){return fetch("https://adalab.bmind.es/api/users").then(function(e){return e.json()})},j=function(e){function a(e){var t;Object(c.a)(this,a),t=Object(o.a)(this,Object(d.a)(a).call(this,e));var n=v()();return t.state={usersData:[],selectedUser:{},isFetching:!0,isDisabled:!1,loggedUser:{},selectedRange:[n,v()(n).add(0,"day")],selectRange:!0,year:n.year(),selectedDay:n,team:"0"},t.handlerChangeSelect=t.handlerChangeSelect.bind(Object(u.a)(t)),t.rangePicked=t.rangePicked.bind(Object(u.a)(t)),t.onPrevYear=t.onPrevYear.bind(Object(u.a)(t)),t.onNextYear=t.onNextYear.bind(Object(u.a)(t)),t.datePicked=t.datePicked.bind(Object(u.a)(t)),t.goToToday=t.goToToday.bind(Object(u.a)(t)),t.handlerChangeTeam=t.handlerChangeTeam.bind(Object(u.a)(t)),t.handleValidatePeriod=t.handleValidatePeriod.bind(Object(u.a)(t)),t}return Object(h.a)(a,e),Object(i.a)(a,[{key:"fetchUsers",value:function(){var e=this;S().then(function(a){e.setState({usersData:a,selectedUser:a[0],isFetching:!1,loggedUser:a[0]})})}},{key:"componentDidMount",value:function(){this.fetchUsers()}},{key:"handlerChangeTeam",value:function(e){var a=e.target.value;this.setState({team:a})}},{key:"handlerChangeSelect",value:function(e){var a=e.target.value,t=this.state.usersData.find(function(e){return parseInt(a)===e.id});parseInt(a)===this.state.loggedUser.id?this.setState({selectedUser:t,isDisabled:!1,selectRange:!0}):this.setState({selectedUser:t,isDisabled:!0,selectRange:!1})}},{key:"handleValidatePeriod",value:function(){var e=this.state.selectedRange[0]._i[2],a=parseInt(this.state.selectedRange[0]._i[1])+1,t=this.state.selectedRange[0]._i[0],n=this.state.selectedRange[1]._i[2],r=parseInt(this.state.selectedRange[1]._i[1])+1,s=this.state.selectedRange[1]._i[0],l=new URL("https://adalab.bmind.es/api/periods"),c={start_date:t+"-"+a+"-"+e,end_date:s+"-"+r+"-"+n,year:s,user_id:this.state.loggedUser.id};fetch(l,{method:"POST",body:JSON.stringify(c),headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e}).then(function(e){return e}),window.location.reload()}},{key:"goToToday",value:function(){var e=v()();this.setState({selectedDay:e,selectedRange:[e,v()(e).add(0,"day")],year:e.year()})}},{key:"datePicked",value:function(e){this.setState({selectedDay:e,selectedRange:[e,v()(e).add(0,"day")]})}},{key:"rangePicked",value:function(e,a){this.setState({selectedRange:[e,a],selectedDay:e})}},{key:"onPrevYear",value:function(){this.setState(function(e){return{year:e.year-1}})}},{key:"onNextYear",value:function(){this.setState(function(e){return{year:e.year+1}})}},{key:"render",value:function(){var e=this.state,a=e.selectedUser,t=e.isFetching,n=e.usersData,s=e.loggedUser,l=e.isDisabled,c=e.selectedRange,i=e.selectRange,o=e.year,d=e.selectedDay,u=e.team;return r.a.createElement("div",{className:"App"},t?r.a.createElement("p",{className:"loading"},"Loading..."):r.a.createElement(T,{selectedUser:a,usersData:n,handlerChangeSelect:this.handlerChangeSelect,isDisabled:l,loggedUser:s,selectedRange:c,selectRange:i,year:o,selectedDay:d,goToToday:this.goToToday,onNextYear:this.onNextYear,datePicked:this.datePicked,onPrevYear:this.onPrevYear,rangePicked:this.rangePicked,selectRangeAvailable:this.selectRangeAvailable,handlerChangeTeam:this.handlerChangeTeam,team:u,handleValidatePeriod:this.handleValidatePeriod}))}}]),a}(r.a.Component),w=(t(8),t(16)),Y=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(o.a)(this,Object(d.a)(a).call(this,e))).onClick=t.onClick.bind(Object(u.a)(t)),t.onHover=t.onHover.bind(Object(u.a)(t)),t}return Object(h.a)(a,e),Object(i.a)(a,[{key:"onClick",value:function(){var e=this.props;(0,e.dayClicked)(e.day)}},{key:"onHover",value:function(){var e=this.props;(0,e.dayHovered)(e.day)}},{key:"render",value:function(){var e=this.props,a=e.classes,t=e.day;return r.a.createElement("td",{onClick:this.onClick,onMouseEnter:this.onHover,className:a},r.a.createElement("span",{className:"day-number"},null===t?"":t.date()))}}]),a}(n.Component);Y.defaultProps={classes:"",day:null};var _=Y;function U(e,a,t){null==a&&(a=e||0,e=0),t=t||1;for(var n=Math.max(Math.ceil((a-e)/t),0),r=Array(n),s=0;s<n;s++,e+=t)r[s]=e;return r}var W={selectingRange:void 0,selectedRange:void 0,customClasses:void 0},x=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(o.a)(this,Object(d.a)(a).call(this,e))).state={},t}return Object(h.a)(a,e),Object(i.a)(a,[{key:"componentWillReceiveProps",value:function(e){void 0!==e.selectingRange&&this.setState({selectingRangeStart:e.selectingRange[0].month(),selectingRangeEnd:e.selectingRange[1].month()})}},{key:"shouldComponentUpdate",value:function(e){var a=this.props,t=a.month,n=a.selectingRange,r=a.selectedRange,s=this.state,l=s.selectingRangeStart,c=s.selectingRangeEnd;if(this.props.year!==e.year||this.props.forceFullWeeks!==e.forceFullWeeks||this.props.showWeekSeparators!==e.showWeekSeparators||this.props.firstDayOfWeek!==e.firstDayOfWeek||this.props.selectRange!==e.selectRange||this.props.customClasses!==e.customClasses||this.props.selectRange&&void 0===n&&void 0===e.selectingRange)return!0;if(this.props.selectRange){if(void 0===n){var i=r[0].month(),o=r[1].month();if(i>o){var d=[o,i];i=d[0],o=d[1]}var u=e.selectingRange[0].month(),h=e.selectingRange[1].month();if(u>h){var g=[h,u];u=g[0],h=g[1]}return i<=t&&t<=o||u<=t&&t<=h}if(void 0===e.selectingRange){var m=l,f=c;if(m>f){var y=[f,m];m=y[0],f=y[1]}var v=e.selectedRange[0].month(),p=e.selectedRange[1].month();if(v>p){var k=[p,v];v=k[0],p=k[1]}return m<=t&&t<=f||v<=t&&t<=p}var b=l,R=c;if(b>R){var E=[R,b];b=E[0],R=E[1]}var D=e.selectingRange[0].month(),P=e.selectingRange[1].month();if(D>P){var C=[P,D];D=C[0],P=C[1]}return b<=t&&t<=R||D<=t&&t<=P}return this.props.selectedDay.month()===t||e.selectedDay.month()===t}},{key:"dayClicked",value:function(e,a){var t=this.props.dayClicked;t(e,a)}},{key:"dayHovered",value:function(e){var a=this.props,t=a.selectRange,n=a.dayHovered;t&&n(e)}},{key:"renderMonthDays",value:function(){for(var e=this,a=this.props,t=a.year,n=a.month,s=a.forceFullWeeks,l=a.showWeekSeparators,c=a.selectedDay,i=a.firstDayOfWeek,o=a.selectingRange,d=a.selectRange,u=a.selectedRange,h=a.customClasses,g=v()([t,n,1]),m=g.weekday();m<i;)m+=7;var f=g.daysInMonth(),y=[];return U(i+1,(s?42:37)+i+1).forEach(function(a){var s=v()([t,n,a-m]),g=[];if(a<=m)g.push("prev-month");else if(a>f+m)g.push("next-month");else{if(d){var p=(o||u)[0],k=(o||u)[1];if(k.isBefore(p)){var b=o||u,R=Object(w.a)(b,2);k=R[0],p=R[1]}s.isBetween(p,k,"day","[]")&&g.push("range"),s.isSame(p,"day")&&g.push("range-left"),s.isSame(k,"day")&&g.push("range-right")}else s.isSame(c,"day")&&g.push("selected");h instanceof Function&&g.push(h(s))}(a-1)%7===0&&g.push("bolder"),h&&Object.keys(h).forEach(function(e){var a=h[e];if("string"===typeof a)a.indexOf(s.format("ddd"))>-1&&g.push(e);else if(a instanceof Array)a.forEach(function(a){s.format("YYYY-MM-DD")===a&&g.push(e)});else if(a instanceof Function)a(s)&&g.push(e);else if(a.start&&a.end){var t=v()(a.start,"YYYY-MM-DD").add(-1,"days"),n=v()(a.end,"YYYY-MM-DD").add(1,"days");s.isBetween(t,n)&&g.push(e)}}),l&&(a-1)%7===i&&y.length&&y.push(r.a.createElement("td",{className:"week-separator",key:"seperator-".concat(a)})),y.push(r.a.createElement(_,{key:"day-".concat(a),day:s.isValid()?s:null,classes:g.join(" "),dayClicked:function(a){return e.dayClicked(a,g.join(" "))},dayHovered:function(a){return e.dayHovered(a)}}))}),y}},{key:"render",value:function(){var e=this.props,a=e.month,t=e.year;return r.a.createElement("tr",null,r.a.createElement("td",{className:"month-name"},v()([t,a,1]).format("MMM")),this.renderMonthDays())}}]),a}(n.Component);x.defaultProps=W;var F=x,M={forceFullWeeks:!1,showDaysOfWeek:!0,showWeekSeparators:!0,firstDayOfWeek:0,selectRange:!1,onPickDate:null,onPickRange:null,selectedDay:v()(),customClasses:null},V=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(o.a)(this,Object(d.a)(a).call(this,e))).state={selectingRange:void 0},t}return Object(h.a)(a,e),Object(i.a)(a,[{key:"dayClicked",value:function(e,a){if(e){var t=this.state.selectingRange,n=this.props,r=n.selectRange,s=n.onPickRange,l=n.onPickDate;r?(t?(s instanceof Function&&(t[0]>e?s(e,t[0]):s(t[0],e)),t=void 0):t=[e,e],this.setState({selectingRange:t})):l instanceof Function&&l(e,a)}}},{key:"dayHovered",value:function(e){if(e){var a=this.state.selectingRange;a&&(a[1]=e,this.setState({selectingRange:a}))}}},{key:"renderDaysOfWeek",value:function(){var e=this.props,a=e.firstDayOfWeek,t=e.forceFullWeeks,n=e.showWeekSeparators,s=[];return U(a,(t?42:37)+a).forEach(function(e){var t=v()().weekday(e).format("dd").charAt(0);n&&e%7===a&&s.length&&s.push(r.a.createElement("th",{className:"week-separator",key:"seperator-".concat(e)})),s.push(r.a.createElement("th",{key:"weekday-".concat(e),className:e%7===0?"bolder":""},t))}),r.a.createElement("tr",null,r.a.createElement("th",null,"\xa0"),s)}},{key:"render",value:function(){var e=this,a=this.state.selectingRange,t=U(0,12).map(function(t){return r.a.createElement(F,Object.assign({month:t,key:"month-".concat(t),dayClicked:function(a,t){return e.dayClicked(a,t)},dayHovered:function(a){return e.dayHovered(a)}},e.props,{selectingRange:a}))});return r.a.createElement("table",{className:"calendar"},r.a.createElement("thead",{className:"day-headers"},this.props.showDaysOfWeek?this.renderDaysOfWeek():null),r.a.createElement("tbody",null,t))}}]),a}(n.Component);V.defaultProps=M;var H=V,A=function(e){var a,t=e.year,n=e.showTodayButton,s=e.goToToday,l=e.onPrevYear,c=e.onNextYear;return n&&(a=r.a.createElement("div",{className:"control today",onClick:function(){return s()}},"Today")),r.a.createElement("div",{className:"calendar-controls"},r.a.createElement("div",{className:"control",onClick:function(){return l()}},"\xab"),r.a.createElement("div",{className:"current-year"},t),r.a.createElement("div",{className:"control",onClick:function(){return c()}},"\xbb"),a)};A.defaultProps={onPrevYear:void 0,onNextYear:void 0,goToToday:void 0,showTodayButton:!1};var B=A;t.d(a,"Calendar",function(){return H}),t.d(a,"CalendarControls",function(){return B}),l.a.render(r.a.createElement(j,null),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.3d10e772.chunk.js.map