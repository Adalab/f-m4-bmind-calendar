(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,,function(e,a,t){e.exports=t.p+"static/media/logo-bmind-holidays.d4acb251.png"},function(e,a,t){e.exports=t.p+"static/media/logo-bmind.b33ac75d.png"},,function(e,a,t){e.exports=t(42)},,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,function(e,a,t){},,,,,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),r=t(13),l=t.n(r),o=(t(23),t(3)),c=t(4),i=t(6),d=t(5),u=t(2),h=t(7),g=(t(24),t(25),t(26),t(14)),m=t.n(g);var f=function(e){var a=e.loggedUser;return s.a.createElement("header",{className:"Header"},s.a.createElement("img",{src:m.a,alt:"logo Bmind",className:"Header__image"}),s.a.createElement("p",{className:"Header__wellcome"},"Hola, ".concat(a.name)))},y=(t(27),t(28),t(1)),v=t.n(y);var p=function(e){var a=e.selectedUser,t=parseInt(a.vacation_days[v()().year()])-parseInt(a.vacations_used[v()().year()]);return s.a.createElement("div",{className:"info-holidays"},"Informaci\xf3n sobre las vacaciones de este a\xf1o de ",s.a.createElement("span",{className:"bold-name"},a.name)," :",s.a.createElement("ul",{className:"info-holidays__days"},s.a.createElement("li",null,"Vacaciones totales: ",a.vacation_days[v()().year()]||"sin informaci\xf3n"),s.a.createElement("li",null,"Vacaciones usadas: ",a.vacations_used[v()().year()]||"sin informaci\xf3n"),s.a.createElement("li",null,"Vacaciones disponibles: ",t||"sin informaci\xf3n")))},k=(t(30),t(10)),b=(t(39),function(e){return s.a.createElement("div",{className:"info__container"},s.a.createElement("div",{className:"Main__legend-content"},s.a.createElement("div",{className:"Main__legend-color-approved"}),s.a.createElement("p",null,"Vacaciones aprobadas"),s.a.createElement("div",{className:"Main__legend-color-requested"}),s.a.createElement("p",null,"Vacaciones seleccionadas")),s.a.createElement("div",{className:"info__container__info-button"},s.a.createElement("p",{className:"info__paragraph"},e.isDisabled?"Si quieres elegir tus vacaciones, vuelve a tu usuario":""),s.a.createElement("button",{className:"btn-validate",disabled:e.isDisabled,onClick:e.handleValidatePeriod},"Validar")))}),R=function(e){function a(e){var t;Object(o.a)(this,a),t=Object(i.a)(this,Object(d.a)(a).call(this,e));v()();return t.state={showDaysOfWeek:!0,showTodayBtn:!0,showWeekSeparators:!0,firstDayOfWeek:1,customCSSclasses:{}},t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"toggleShowDaysOfWeek",value:function(){this.setState(function(e){return{showDaysOfWeek:!e.showDaysOfWeek}})}},{key:"toggleForceFullWeeks",value:function(){this.setState(function(e){return{showDaysOfWeek:!0,forceFullWeeks:!e.forceFullWeeks}})}},{key:"toggleShowTodayBtn",value:function(){this.setState(function(e){return{showTodayBtn:!e.showTodayBtn}})}},{key:"toggleShowWeekSeparators",value:function(){this.setState(function(e){return{showWeekSeparators:!e.showWeekSeparators}})}},{key:"selectFirstDayOfWeek",value:function(e){this.setState({firstDayOfWeek:parseInt(e.target.value,10)})}},{key:"render",value:function(){var e=this.state,a=e.showTodayBtn,t=e.showDaysOfWeek,n=e.forceFullWeeks,r=e.showWeekSeparators,l=e.firstDayOfWeek,o=e.customCSSclasses,c=this.props,i=c.selectedUser,d=c.isDisabled,u=c.selectRange,h=c.selectedRange,g=c.year,m=c.selectedDay,f=c.goToToday,y=c.onNextYear,v=c.datePicked,p=c.onPrevYear,R=c.rangePicked,E=c.handleValidatePeriod;o={};var D=!0,P=!1,O=void 0;try{for(var C,S=i.periods[Symbol.iterator]();!(D=(C=S.next()).done);D=!0){var N=C.value;o["periods "+N.id]={start:N.start_date,end:N.end_date}}}catch(T){P=!0,O=T}finally{try{D||null==S.return||S.return()}finally{if(P)throw O}}return s.a.createElement("div",null,s.a.createElement("div",{id:"calendar"},s.a.createElement(k.CalendarControls,{year:g,showTodayButton:a,onPrevYear:function(){return p()},onNextYear:function(){return y()},goToToday:function(){return f()}}),s.a.createElement(k.Calendar,{selectedUser:i,year:g,selectedDay:m,showDaysOfWeek:t,forceFullWeeks:n,showWeekSeparators:r,firstDayOfWeek:l,selectRange:u,selectedRange:h,onPickDate:function(e){return v(e)},onPickRange:function(e,a){return R(e,a)},customClasses:o})),s.a.createElement(b,{isDisabled:d,handleValidatePeriod:E}))}}]),a}(s.a.Component);var E=function(e){var a=e.selectedUser,t=e.isDisabled,n=e.loggedUser,r=e.selectRange,l=e.selectedRange,o=e.year,c=e.selectedDay,i=e.goToToday,d=e.onNextYear,u=e.datePicked,h=e.onPrevYear,g=e.rangePicked,m=e.selectRangeAvailable,f=e.handleValidatePeriod;return s.a.createElement("div",null,s.a.createElement(R,{selectedUser:a,isDisabled:t,loggedUser:n,selectRange:r,selectedRange:l,year:o,selectedDay:c,goToToday:i,onNextYear:d,datePicked:u,onPrevYear:h,rangePicked:g,selectRangeAvailable:m,handleValidatePeriod:f}))};t(40);var D=function(e){var a=e.usersData,t=e.handlerChangeSelect,n=e.handlerChangeTeam,r=e.team;return s.a.createElement("div",{className:"container-filters"},s.a.createElement("label",{htmlFor:""}," Equipo: "),s.a.createElement("select",{className:"btn-select",onChange:n},s.a.createElement("option",{value:"0",key:"0"}," Todos"),s.a.createElement("option",{value:"1",key:"1"}," Marketing"),s.a.createElement("option",{value:"2",key:"2"}," Dpto.T\xe9cnico")),s.a.createElement("label",{htmlFor:""}," Usuarios:  "),s.a.createElement("select",{className:"btn-select",onChange:t},"0"===r?a.map(function(e){return s.a.createElement("option",{value:e.id,key:e.id},e.name)}):a.filter(function(e){return e.team_id===r}).map(function(e){return s.a.createElement("option",{value:e.id,key:e.id},e.name)})))};var P=function(e){var a=e.selectedUser,t=e.usersData,n=e.handlerChangeSelect,r=e.isDisabled,l=e.loggedUser,o=e.selectRange,c=e.selectedRange,i=e.year,d=e.selectedDay,u=e.goToToday,h=e.onNextYear,g=e.datePicked,m=e.onPrevYear,f=e.rangePicked,y=e.selectRangeAvailable,v=e.handlerChangeTeam,k=e.handleValidatePeriod,b=e.team;return s.a.createElement("main",{className:"Main"},s.a.createElement("section",{className:"content-info-filter"},s.a.createElement(p,{selectedUser:a}),s.a.createElement(D,{usersData:t,handlerChangeSelect:n,selectedUser:a,handlerChangeTeam:v,team:b})),s.a.createElement(E,{selectedUser:a,isDisabled:r,loggedUser:l,selectRange:o,selectedRange:c,year:i,selectedDay:d,goToToday:u,onNextYear:h,datePicked:g,onPrevYear:m,rangePicked:f,selectRangeAvailable:y,handleValidatePeriod:k}))},O=(t(41),t(15)),C=t.n(O);var S=function(){return s.a.createElement("footer",{className:"Footer"},s.a.createElement("p",{className:"Footer__copyright"},"Adalabers \xa9 2019"),s.a.createElement("a",{href:"https://www.bmind.es/es/",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:C.a,alt:"logo Bmind",className:"Footer__image"})))};var N=function(e){var a=e.selectedUser,t=e.usersData,r=e.handlerChangeSelect,l=e.loggedUser,o=e.isDisabled,c=e.selectRange,i=e.selectedRange,d=e.year,u=e.selectedDay,h=e.goToToday,g=e.onNextYear,m=e.datePicked,y=e.onPrevYear,v=e.rangePicked,p=e.selectRangeAvailable,k=e.handlerChangeTeam,b=e.handleValidatePeriod,R=e.team;return s.a.createElement(n.Fragment,null,s.a.createElement(f,{loggedUser:l}),s.a.createElement(P,{selectedUser:a,usersData:t,handlerChangeSelect:r,handlerChangeTeam:k,team:R,isDisabled:o,loggedUser:l,selectRange:c,selectedRange:i,year:d,selectedDay:u,goToToday:h,onNextYear:g,datePicked:m,onPrevYear:y,rangePicked:v,selectRangeAvailable:p,handleValidatePeriod:b}),s.a.createElement(S,null))};var T=function(){return fetch("https://adalab.bmind.es/api/users").then(function(e){return e.json()})},w=function(e){function a(e){var t;Object(o.a)(this,a),t=Object(i.a)(this,Object(d.a)(a).call(this,e));var n=v()();return t.state={usersData:[],selectedUser:{},isFetching:!0,isDisabled:!1,loggedUser:{},selectedRange:[n,v()(n).add(0,"day")],selectRange:!0,year:n.year(),selectedDay:n,team:"0"},t.handlerChangeSelect=t.handlerChangeSelect.bind(Object(u.a)(t)),t.rangePicked=t.rangePicked.bind(Object(u.a)(t)),t.onPrevYear=t.onPrevYear.bind(Object(u.a)(t)),t.onNextYear=t.onNextYear.bind(Object(u.a)(t)),t.datePicked=t.datePicked.bind(Object(u.a)(t)),t.goToToday=t.goToToday.bind(Object(u.a)(t)),t.handlerChangeTeam=t.handlerChangeTeam.bind(Object(u.a)(t)),t.handleValidatePeriod=t.handleValidatePeriod.bind(Object(u.a)(t)),t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"fetchUsers",value:function(){var e=this;T().then(function(a){e.setState({usersData:a,selectedUser:a[0],isFetching:!1,loggedUser:a[0]})})}},{key:"componentDidMount",value:function(){this.fetchUsers()}},{key:"handlerChangeTeam",value:function(e){console.log(e.target.name);var a=e.target.value;this.setState({team:a})}},{key:"handlerChangeSelect",value:function(e){var a=e.target.value,t=this.state.usersData.find(function(e){return parseInt(a)===e.id});parseInt(a)===this.state.loggedUser.id?this.setState({selectedUser:t,isDisabled:!1,selectRange:!0}):this.setState({selectedUser:t,isDisabled:!0,selectRange:!1})}},{key:"handleValidatePeriod",value:function(){var e=this.state.selectedRange[0]._i[2],a=parseInt(this.state.selectedRange[0]._i[1])+1,t=this.state.selectedRange[0]._i[0],n=this.state.selectedRange[1]._i[2],s=parseInt(this.state.selectedRange[1]._i[1])+1,r=this.state.selectedRange[1]._i[0],l=(new URL("https://adalab.bmind.es/api/periods"),{start_date:t+"-"+a+"-"+e,end_date:r+"-"+s+"-"+n,year:r,user_id:this.state.loggedUser.id});console.log(l)}},{key:"goToToday",value:function(){var e=v()();this.setState({selectedDay:e,selectedRange:[e,v()(e).add(0,"day")],year:e.year()})}},{key:"datePicked",value:function(e){this.setState({selectedDay:e,selectedRange:[e,v()(e).add(0,"day")]})}},{key:"rangePicked",value:function(e,a){this.setState({selectedRange:[e,a],selectedDay:e})}},{key:"onPrevYear",value:function(){this.setState(function(e){return{year:e.year-1}})}},{key:"onNextYear",value:function(){this.setState(function(e){return{year:e.year+1}})}},{key:"render",value:function(){var e=this.state,a=e.selectedUser,t=e.isFetching,n=e.usersData,r=e.loggedUser,l=e.isDisabled,o=e.selectedRange,c=e.selectRange,i=e.year,d=e.selectedDay,u=e.team;return s.a.createElement("div",{className:"App"},t?s.a.createElement("p",{className:"loading"},"Loading..."):s.a.createElement(N,{selectedUser:a,usersData:n,handlerChangeSelect:this.handlerChangeSelect,isDisabled:l,loggedUser:r,selectedRange:o,selectRange:c,year:i,selectedDay:d,goToToday:this.goToToday,onNextYear:this.onNextYear,datePicked:this.datePicked,onPrevYear:this.onPrevYear,rangePicked:this.rangePicked,selectRangeAvailable:this.selectRangeAvailable,handlerChangeTeam:this.handlerChangeTeam,team:u,handleValidatePeriod:this.handleValidatePeriod}))}}]),a}(s.a.Component),W=(t(8),t(16)),Y=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(i.a)(this,Object(d.a)(a).call(this,e))).onClick=t.onClick.bind(Object(u.a)(t)),t.onHover=t.onHover.bind(Object(u.a)(t)),t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"onClick",value:function(){var e=this.props;(0,e.dayClicked)(e.day)}},{key:"onHover",value:function(){var e=this.props;(0,e.dayHovered)(e.day)}},{key:"render",value:function(){var e=this.props,a=e.classes,t=e.day;return s.a.createElement("td",{onClick:this.onClick,onMouseEnter:this.onHover,className:a},s.a.createElement("span",{className:"day-number"},null===t?"":t.date()))}}]),a}(n.Component);Y.defaultProps={classes:"",day:null};var j=Y;function _(e,a,t){null==a&&(a=e||0,e=0),t=t||1;for(var n=Math.max(Math.ceil((a-e)/t),0),s=Array(n),r=0;r<n;r++,e+=t)s[r]=e;return s}var U={selectingRange:void 0,selectedRange:void 0,customClasses:void 0},F=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(i.a)(this,Object(d.a)(a).call(this,e))).state={},t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"componentWillReceiveProps",value:function(e){void 0!==e.selectingRange&&this.setState({selectingRangeStart:e.selectingRange[0].month(),selectingRangeEnd:e.selectingRange[1].month()})}},{key:"shouldComponentUpdate",value:function(e){var a=this.props,t=a.month,n=a.selectingRange,s=a.selectedRange,r=this.state,l=r.selectingRangeStart,o=r.selectingRangeEnd;if(this.props.year!==e.year||this.props.forceFullWeeks!==e.forceFullWeeks||this.props.showWeekSeparators!==e.showWeekSeparators||this.props.firstDayOfWeek!==e.firstDayOfWeek||this.props.selectRange!==e.selectRange||this.props.customClasses!==e.customClasses||this.props.selectRange&&void 0===n&&void 0===e.selectingRange)return!0;if(this.props.selectRange){if(void 0===n){var c=s[0].month(),i=s[1].month();if(c>i){var d=[i,c];c=d[0],i=d[1]}var u=e.selectingRange[0].month(),h=e.selectingRange[1].month();if(u>h){var g=[h,u];u=g[0],h=g[1]}return c<=t&&t<=i||u<=t&&t<=h}if(void 0===e.selectingRange){var m=l,f=o;if(m>f){var y=[f,m];m=y[0],f=y[1]}var v=e.selectedRange[0].month(),p=e.selectedRange[1].month();if(v>p){var k=[p,v];v=k[0],p=k[1]}return m<=t&&t<=f||v<=t&&t<=p}var b=l,R=o;if(b>R){var E=[R,b];b=E[0],R=E[1]}var D=e.selectingRange[0].month(),P=e.selectingRange[1].month();if(D>P){var O=[P,D];D=O[0],P=O[1]}return b<=t&&t<=R||D<=t&&t<=P}return this.props.selectedDay.month()===t||e.selectedDay.month()===t}},{key:"dayClicked",value:function(e,a){var t=this.props.dayClicked;t(e,a)}},{key:"dayHovered",value:function(e){var a=this.props,t=a.selectRange,n=a.dayHovered;t&&n(e)}},{key:"renderMonthDays",value:function(){for(var e=this,a=this.props,t=a.year,n=a.month,r=a.forceFullWeeks,l=a.showWeekSeparators,o=a.selectedDay,c=a.firstDayOfWeek,i=a.selectingRange,d=a.selectRange,u=a.selectedRange,h=a.customClasses,g=v()([t,n,1]),m=g.weekday();m<c;)m+=7;var f=g.daysInMonth(),y=[];return _(c+1,(r?42:37)+c+1).forEach(function(a){var r=v()([t,n,a-m]),g=[];if(a<=m)g.push("prev-month");else if(a>f+m)g.push("next-month");else{if(d){var p=(i||u)[0],k=(i||u)[1];if(k.isBefore(p)){var b=i||u,R=Object(W.a)(b,2);k=R[0],p=R[1]}r.isBetween(p,k,"day","[]")&&g.push("range"),r.isSame(p,"day")&&g.push("range-left"),r.isSame(k,"day")&&g.push("range-right")}else r.isSame(o,"day")&&g.push("selected");h instanceof Function&&g.push(h(r))}(a-1)%7===0&&g.push("bolder"),h&&Object.keys(h).forEach(function(e){var a=h[e];if("string"===typeof a)a.indexOf(r.format("ddd"))>-1&&g.push(e);else if(a instanceof Array)a.forEach(function(a){r.format("YYYY-MM-DD")===a&&g.push(e)});else if(a instanceof Function)a(r)&&g.push(e);else if(a.start&&a.end){var t=v()(a.start,"YYYY-MM-DD").add(-1,"days"),n=v()(a.end,"YYYY-MM-DD").add(1,"days");r.isBetween(t,n)&&g.push(e)}}),l&&(a-1)%7===c&&y.length&&y.push(s.a.createElement("td",{className:"week-separator",key:"seperator-".concat(a)})),y.push(s.a.createElement(j,{key:"day-".concat(a),day:r.isValid()?r:null,classes:g.join(" "),dayClicked:function(a){return e.dayClicked(a,g.join(" "))},dayHovered:function(a){return e.dayHovered(a)}}))}),y}},{key:"render",value:function(){var e=this.props,a=e.month,t=e.year;return s.a.createElement("tr",null,s.a.createElement("td",{className:"month-name"},v()([t,a,1]).format("MMM")),this.renderMonthDays())}}]),a}(n.Component);F.defaultProps=U;var x=F,M={forceFullWeeks:!1,showDaysOfWeek:!0,showWeekSeparators:!0,firstDayOfWeek:0,selectRange:!1,onPickDate:null,onPickRange:null,selectedDay:v()(),customClasses:null},V=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(i.a)(this,Object(d.a)(a).call(this,e))).state={selectingRange:void 0},t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"dayClicked",value:function(e,a){if(e){var t=this.state.selectingRange,n=this.props,s=n.selectRange,r=n.onPickRange,l=n.onPickDate;s?(t?(r instanceof Function&&(t[0]>e?r(e,t[0]):r(t[0],e)),t=void 0):t=[e,e],this.setState({selectingRange:t})):l instanceof Function&&l(e,a)}}},{key:"dayHovered",value:function(e){if(e){var a=this.state.selectingRange;a&&(a[1]=e,this.setState({selectingRange:a}))}}},{key:"renderDaysOfWeek",value:function(){var e=this.props,a=e.firstDayOfWeek,t=e.forceFullWeeks,n=e.showWeekSeparators,r=[];return _(a,(t?42:37)+a).forEach(function(e){var t=v()().weekday(e).format("dd").charAt(0);n&&e%7===a&&r.length&&r.push(s.a.createElement("th",{className:"week-separator",key:"seperator-".concat(e)})),r.push(s.a.createElement("th",{key:"weekday-".concat(e),className:e%7===0?"bolder":""},t))}),s.a.createElement("tr",null,s.a.createElement("th",null,"\xa0"),r)}},{key:"render",value:function(){var e=this,a=this.state.selectingRange,t=_(0,12).map(function(t){return s.a.createElement(x,Object.assign({month:t,key:"month-".concat(t),dayClicked:function(a,t){return e.dayClicked(a,t)},dayHovered:function(a){return e.dayHovered(a)}},e.props,{selectingRange:a}))});return s.a.createElement("table",{className:"calendar"},s.a.createElement("thead",{className:"day-headers"},this.props.showDaysOfWeek?this.renderDaysOfWeek():null),s.a.createElement("tbody",null,t))}}]),a}(n.Component);V.defaultProps=M;var H=V,B=function(e){var a,t=e.year,n=e.showTodayButton,r=e.goToToday,l=e.onPrevYear,o=e.onNextYear;return n&&(a=s.a.createElement("div",{className:"control today",onClick:function(){return r()}},"Today")),s.a.createElement("div",{className:"calendar-controls"},s.a.createElement("div",{className:"control",onClick:function(){return l()}},"\xab"),s.a.createElement("div",{className:"current-year"},t),s.a.createElement("div",{className:"control",onClick:function(){return o()}},"\xbb"),a)};B.defaultProps={onPrevYear:void 0,onNextYear:void 0,goToToday:void 0,showTodayButton:!1};var A=B;t.d(a,"Calendar",function(){return H}),t.d(a,"CalendarControls",function(){return A}),l.a.render(s.a.createElement(w,null),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.1d72e069.chunk.js.map